# ライブグッズ交換マッチングアプリ

## 詳細設計仕様書

**作成日:** 2026年2月14日  
**バージョン:** 1.0

---

## 📋 目次

1. [プロジェクト概要](#1-プロジェクト概要)
2. [ターゲットユーザーとペルソナ](#2-ターゲットユーザーとペルソナ)
3. [ユーザーフローとユースケース](#3-ユーザーフローとユースケース)
4. [コア機能の詳細仕様](#4-コア機能の詳細仕様)
5. [画面構成とUI/UX設計](#5-画面構成とuiux設計)
6. [安全性・信頼性の確保策](#6-安全性信頼性の確保策)
7. [技術スタック推奨](#7-技術スタック推奨)
8. [開発ロードマップ](#8-開発ロードマップ)
9. [開発チェックリスト](#9-開発チェックリスト)
10. [付録: 将来の拡張アイデア](#10-付録-将来の拡張アイデア)

---

## 1. プロジェクト概要

### 1.1 プロジェクト名
**「トレマチ（TradeMatcher)」**（仮称）

### 1.2 ビジョン
ライブグッズのランダムトレーディングにおいて、会場で手軽に、安全に、リアルタイムで交換相手を見つけられる体験を提供する。

### 1.3 解決する課題

本アプリは以下の課題を解決します：

- **SNS上での交換約束の手間**: 事前にXやInstagramで交換相手を探し、約束を取り付ける必要があるが、ドタキャンのリスクもある
- **身近に交換相手がいない**: 同じイベントに参加している人の中で、誰が何を持っているか分からない
- **偶然の出会いへの依存**: 会場で偶然、交換したい人に出会うことを期待するしかない
- **個人間取引の不安**: 詐欺や偽物のリスク、安全面での懸念

### 1.4 主な機能

- ✅ グッズ登録機能（持っているもの、欲しいもの）
- 📍 位置情報ベースのリアルタイムマッチング
- 🔔 近くのマッチング通知
- 🎨 相互識別マーク表示（カラーコード、QRコード、アバター）
- ⭐ 交換完了報告・評価システム

---

## 2. ターゲットユーザーとペルソナ

### 2.1 ターゲット層
年齢問わず、ライブやイベントに参加し、ランダムグッズを購入・トレードする全てのファン層

### 2.2 ペルソナ例

| 項目 | ペルソナA | ペルソナB | ペルソナC |
|------|-----------|-----------|-----------|
| **名前** | 美咲（20歳） | 太郎（28歳） | 花子（35歳） |
| **好きなジャンル** | アイドル | アニメ | バンド |
| **課題** | SNSで交換相手を探すのが面倒 | 会場で誰が何を持っているか分からない | 詐欺が心配 |
| **期待する価値** | 手軽に交換相手が見つかる | リアルタイムで近くの人とマッチング | 安全に交換できる |

---

## 3. ユーザーフローとユースケース

### 3.1 基本ユーザーフロー

#### フロー1: 初回利用〜グッズ登録

1. アプリをダウンロード・インストール
2. アカウント登録（メールアドレス/SNS連携）
3. プロフィール設定（ニックネーム、アバター選択）
4. 位置情報利用の許可
5. イベント/アーティストを選択
6. 持っているグッズを登録
7. 欲しいグッズを登録

#### フロー2: マッチング〜交換完了

1. ライブ会場に到着
2. アプリを起動し、「マッチング開始」ボタンをタップ
3. 近くでマッチングが見つかると通知が届く
4. マッチング内容を確認（相手の提供グッズ、欲しいグッズ）
5. 「交換する」ボタンをタップ → 相互承認
6. 識別マーク（カラーコード＋アバター）が表示される
7. お互いに相手を見つけて、グッズを交換
8. 「交換完了」ボタンをタップ
9. 相手を評価（任意）

### 3.2 主要ユースケース

| ユースケース | シナリオ | 期待される結果 |
|-------------|----------|---------------|
| **UC-01: 即座の交換** | ライブ会場に到着後、すぐにアプリを起動してマッチング開始 | 5分以内に交換相手が見つかり、ライブ開始前に交換完了 |
| **UC-02: 複数交換** | 持っているグッズが複数あり、それぞれ違う相手と交換したい | 複数のマッチングが順次通知され、効率的に複数回交換 |
| **UC-03: 安全確認** | 相手のプロフィールと評価を確認してから交換を決めたい | 相手の評価スコアと過去の交換履歴を確認し、安心して交換 |

---

## 4. コア機能の詳細仕様

### 4.1 グッズ登録機能

#### 機能概要
ユーザーが所持しているグッズと欲しいグッズを登録・管理する機能。

#### 詳細仕様

**イベント/アーティスト選択**
- 検索機能でイベント名やアーティスト名を入力
- カテゴリー別（アイドル、アニメ、バンドなど）から選択

**グッズ種類の選択**
- データベースに登録されたグッズリストから選択
- グッズ画像付きで視覚的に確認可能
- 手動入力も可能（新作グッズなど）

**所持グッズ登録**
- 複数個の同一グッズ登録が可能
- 写真アップロード機能（本物確認用）

**欲しいグッズ登録**
- 優先順位付け可能（第1希望、第2希望など）
- 複数選択可能

### 4.2 位置情報ベースマッチング機能

#### 機能概要
ユーザーの位置情報を利用し、近くにいる交換可能な相手を自動検出する機能。

#### 詳細仕様

**位置情報取得**
- GPS/WiFi/基地局情報を利用
- バックグラウンドでの定期更新（30秒〜1分間隔）
- ユーザーが「マッチング開始」をONにした時のみ有効

**マッチングロジック**
- 半径50m〜200m以内のユーザーを検索（設定で変更可能）
- 相互に条件が一致する組み合わせを抽出
- 条件: ユーザーAの「持っているグッズ」がユーザーBの「欲しいグッズ」に含まれ、かつその逆も成立

**マッチング通知**
- プッシュ通知で即座に知らせる
- アプリ内通知でマッチング候補を表示
- 相手のプロフィール（ニックネーム、評価、過去の交換回数）を表示

### 4.3 相互識別マーク機能

#### 機能概要
交換相手を会場で見つけやすくするため、視覚的な識別マークを表示する機能。

#### 詳細仕様

**識別方法**
- **カラーコード**: ランダムに生成された鮮やかな色（全画面表示）
- **アバター**: ユーザーが選択したキャラクターアイコン
- **数字コード**: 4桁のランダム番号（追加の確認用）

**表示タイミング**
- 双方が「交換する」ボタンをタップした後に表示
- 画面を高輝度モードで表示し、遠くからでも視認可能に

**追加機能**
- 画面を振ると色が点滅（さらに目立つ）
- 簡易チャット機能（位置説明用）

### 4.4 交換完了・評価機能

#### 機能概要
交換が完了したことを記録し、相手を評価することで、信頼性の高いコミュニティを構築する機能。

#### 詳細仕様

**交換完了報告**
- 双方が「交換完了」ボタンをタップして確定
- 片方だけがタップした場合は保留状態（24時間後に自動完了）

**評価システム**
- 5段階評価（星1〜5）
- コメント記入可能（任意）
- 評価基準: 対応の良さ、約束の守り方、グッズの状態など

**問題報告機能**
- 詐欺や偽物の報告
- 運営に通報可能

---

## 5. 画面構成とUI/UX設計

### 5.1 主要画面一覧

| 画面名 | 主な機能 |
|--------|----------|
| **スプラッシュ** | アプリロゴ表示 |
| **ログイン/新規登録** | メールアドレス or SNS連携でログイン |
| **チュートリアル** | アプリの使い方を3〜5画面で説明 |
| **ホーム** | マッチング開始ボタン、登録グッズ一覧、通知 |
| **グッズ登録** | イベント選択、グッズ種類選択、写真アップロード |
| **マッチング検索中** | 近くの交換相手を検索中、ローディングアニメーション |
| **マッチング結果** | 相手のプロフィール、評価、交換内容確認、「交換する」ボタン |
| **識別マーク表示** | カラーコード全画面表示、アバター、数字コード、簡易チャット |
| **交換完了・評価** | 「交換完了」ボタン、星評価、コメント入力 |
| **マイページ** | プロフィール、交換履歴、評価一覧、設定 |

### 5.2 画面遷移図

```
スプラッシュ
    ↓
ログイン/新規登録
    ↓
チュートリアル
    ↓
ホーム ←→ グッズ登録
    ↓
マッチング検索
    ↓
マッチング結果
    ↓
識別マーク表示
    ↓
交換完了・評価
    ↓
ホーム（戻る）
```

### 5.3 UI/UXデザイン原則

- **シンプルで直感的**: 複雑な操作を避け、タップ数を最小限に
- **視認性重視**: 明るい色使い、大きなボタン、読みやすいフォント
- **安心感のあるデザイン**: 信頼できるコミュニティであることを視覚的に表現
- **アクセシビリティ**: 色覚異常にも配慮したカラーパレット

---

## 6. 安全性・信頼性の確保策

### 6.1 ユーザー認証とアカウント管理

- メールアドレス認証または信頼できるSNS連携（Google, Apple, LINE等）
- SMS認証オプション（将来的に導入）
- 1人1アカウントの原則（重複アカウント作成の防止）

### 6.2 評価システムと信頼スコア

- 累積評価スコアの表示（平均星評価と交換回数）
- 低評価ユーザーへの警告表示
- 一定以下の評価が続くユーザーはマッチングから除外

### 6.3 通報・ブロック機能

- 不適切な行為をしたユーザーを通報可能
- 通報内容を運営が確認し、必要に応じてアカウント停止
- 特定ユーザーのブロック機能（再マッチング防止）

### 6.4 プライバシー保護

- 位置情報は相対的な距離のみ表示（正確な座標は非表示）
- 個人を特定できる情報（氏名、住所など）の登録不要
- 匿名性を保ちながら安全に交換できる設計

### 6.5 グッズの真贋確認

- 写真アップロード機能で事前確認
- 交換前に実物確認を推奨するガイド表示
- 偽物報告機能と警告システム

---

## 7. 技術スタック推奨

### 7.1 フロントエンド（モバイルアプリ）

| 選択肢 | メリット | デメリット |
|--------|----------|-----------|
| **React Native** | iOS/Android同時開発、豊富なライブラリ | パフォーマンスがネイティブより劣る |
| **Flutter** | 高速レンダリング、美しいUI | Dart言語の習得が必要 |
| **Native (Swift/Kotlin)** | 最高のパフォーマンス | 開発コスト2倍、メンテナンスが大変 |

**推奨: React Native**（開発速度と費用対効果のバランスが良い）

### 7.2 バックエンド

- **言語**: Node.js (Express) または Python (FastAPI)
- **データベース**: PostgreSQL（ユーザー・グッズ情報）+ Redis（リアルタイムマッチング用キャッシュ）
- **位置情報処理**: PostGIS（地理空間データ検索）
- **プッシュ通知**: Firebase Cloud Messaging (FCM) + Apple Push Notification Service (APNS)

### 7.3 インフラ

- **クラウド**: AWS または Google Cloud Platform
- **コンテナ**: Docker + Kubernetes（スケーラビリティ確保）
- **CDN**: CloudFlare（画像配信の高速化）

### 7.4 その他ツール

- **認証**: Firebase Authentication または Auth0
- **分析**: Google Analytics + Mixpanel（ユーザー行動分析）
- **エラー監視**: Sentry

---

## 8. 開発ロードマップ

| フェーズ | 期間 | 主な成果物 | 必要リソース | マイルストーン |
|---------|------|-----------|-------------|--------------|
| **Phase 1: 企画・設計** | 2週間 | 要件定義書、設計書、ワイヤーフレーム | PM 1名、デザイナー 1名 | 設計承認 |
| **Phase 2: MVP開発** | 8週間 | 動作する最小限のアプリ | フロントエンド 2名、バックエンド 2名 | 社内デモ |
| **Phase 3: 拡張開発** | 6週間 | 通知、評価、チャット機能 | 同上 | 機能完成 |
| **Phase 4: テスト** | 3週間 | テストレポート、バグ修正 | QA 2名 | リリース準備完了 |
| **Phase 5: リリース** | 1週間 | App Store/Google Play公開 | 全員 | 正式リリース |

**合計開発期間: 約5ヶ月（20週間）**

---

## 9. 開発チェックリスト

### 9.1 Phase 1: 企画・設計
- [ ] 要件定義の完了
- [ ] ユーザーペルソナの作成
- [ ] ワイヤーフレームの作成
- [ ] データベース設計
- [ ] API設計書の作成

### 9.2 Phase 2: MVP開発
- [ ] ユーザー認証機能
- [ ] グッズ登録機能
- [ ] 位置情報取得機能
- [ ] 基本マッチングロジック
- [ ] 識別マーク表示機能
- [ ] 交換完了機能

### 9.3 Phase 3: 拡張機能開発
- [ ] プッシュ通知機能
- [ ] 評価システム
- [ ] チャット機能
- [ ] 通報・ブロック機能
- [ ] グッズデータベース拡充

### 9.4 Phase 4: テスト・リリース
- [ ] 単体テスト
- [ ] 統合テスト
- [ ] ユーザビリティテスト
- [ ] セキュリティ監査
- [ ] App Store / Google Play審査対応
- [ ] ベータ版リリース
- [ ] 正式版リリース

### 9.5 Phase 5: 運用・改善
- [ ] ユーザーフィードバック収集
- [ ] バグ修正
- [ ] パフォーマンス最適化
- [ ] 新機能の追加検討
- [ ] マーケティング施策実施

---

## 10. 付録: 将来の拡張アイデア

### 短期的な改善案
- AIによるマッチング精度向上（ユーザーの好みを学習）
- 事前マッチング予約機能（イベント数日前から）
- グッズカタログの自動生成（公式サイトからスクレイピング）

### 中長期的な拡張案
- グッズ売買機能（交換だけでなく販売・購入も可能に）
- 複数グッズの一括交換機能
- 仮想通貨・ポイント制度の導入
- オンライン交換（郵送対応）
- コミュニティ機能（掲示板、グループチャット）

---

**設計仕様書 終了**
